# Тестовое задание для стажировки QA-инженера

## Задание 2: Тест-кейсы для api (2.1)

### Описание

Это папка с тест-кейсами и их автоматизацией для микросервиса.  
Тесты написаны на языке **Python** с использованием **pytest** и **requests**.  
Реализовано 17 тест-кейсов, описывающих базовые сценарии создания объявлений, получения объявлений по ID, получения всех объявлений по sellerID и получения статистики.

### Структура проекта

```
├── Task_2
  ├── BUGS.md                               # Данные о найденых багах
  ├── postman_collection.json # Postman-коллекция
  ├── README.md                             # Данный файл
  ├── requirements.txt                      # Зависимости проекта
  ├── test_avito.py                         # Основной файл с тестами
  └── TESTCASES.md                          # Подробное описание тестовых сценариев
```

### Установка и запуск тестов

1. **Склонируйте репозиторий** в котором хранится проект тестового задания, через выполнение команды в терминале:

   ```bash
   git clone https://github.com/Fasget/QA-internship-assignments---Avito.git
   ```
   Или скачайте zip архив по [ссылке](https://github.com/Fasget/QA-internship-assignments---Avito/archive/refs/heads/main.zip) и распакуйте его
2. **Перейдите в корневую директорию проекта**, выполнив команду: 

   ```bash
   cd /здесь укажите путь до директории с проектом
   ```

3. **Установите зависимости**:

   ```bash
   pip install -r requirements.txt
   ```
   или
   ```bash
   pip3 install -r requirements.txt
   ```
   Здесь будут установлены библиотеки `pytest` и `requests`, необходимые для тестов.

5. **Запустите тесты**:

   ```bash
   pytest
   ```
   По умолчанию `pytest` найдёт и выполнит все тесты в файлах, соответствующих шаблону `test_*.py`.

   Если эта команда не работает (не указан путь), то выполните:
   
   ```bash
   python -m pytest
   ```

6. **Дополнительные параметры**:

   - Запуск конкретного файла:
     ```bash
     pytest test_service.py
     ```
   - Запуск конкретного теста:
     ```bash
     pytest test_service.py::test_1_create_item_success
     ```
   - Вывод более подробной информации:
     ```bash
     pytest -v
     ```

### Пояснения к тестам

- **Базовые URL:**  
  Для тестирования сервиса используются две константы:  
  - `BASE_URL_V1` указывает на адрес API версии 1 (например, для создания и получения объявлений):  
    ```python
    BASE_URL_V1 = "https://qa-internship.avito.com/api/1"
    ```  
  - `BASE_URL_V2` используется для обращения к API версии 2 (например, для получения статистики и удаления объявлений):  
    ```python
    BASE_URL_V2 = "https://qa-internship.avito.com/api/2"
    ```  
  При необходимости можно заменить эти значения или использовать переменные окружения для тестирования на другом стенде (например, локально).

- **Константы тестовых данных:**  
  Для некоторых тестов требуются реальные данные. В файле заданы следующие константы:
  ```python
  EXISTING_AD_ID = "0cd4183f-a699-4486-83f8-b513dfde477a"
  EXISTING_SELLER_ID = 1234345231
  ```
  Эти значения должны соответствовать уже существующим объявлениям и продавцам в тестовой базе данных.

- **Описание тест-кейсов (TESTCASES.md):**  
  Документ содержит подробное описание сценариев тестирования API:
  - Раздел 1 описывает сценарии создания объявления через `POST /api/1/item`, включая создание с корректными данными, создание с невалидным `sellerID` и создание без обязательных полей.
  - Раздел 2 охватывает получение одного объявления по ID через `GET /api/1/item/:id`.
  - Раздел 3 содержит тест-кейсы для получения всех объявлений конкретного продавца через `GET /api/1/:sellerID/item`.
  - Раздел 4 содержит сценарии получения статистики через `GET /api/1/statistic/:id` для API версии V1.
  - Раздел 5 включает тесты для получения статистики через `GET /api/2/statistic/:id` (API версии V2).
  - Раздел 6 описывает сценарии удаления объявления через `DELETE /api/2/item/:id`.

- **Helper Functions:**  
  В проекте используются хелпер-функции для инкапсуляции общей логики работы с API. Эти функции выполняют следующие задачи:
  - Отправляют запросы к нужным эндпоинтам (POST, GET, DELETE), тем самым уменьшая повторение кода в тестах.
  - Инкапсулируют формирование URL-адресов для различных версий API (V1 и V2).
  - Позволяют легко изменять логику запросов (например, при обновлении базового URL или структуры запроса) в одном месте, без необходимости править каждый тест отдельно.

  Использование этих функций делает тесты компактными, удобными для поддержки и позволяет сосредоточиться на логике проверки, а не на технических деталях формирования запросов.
---
